# ghost_sa
open_server for sensorsdata

感谢：

感谢神策公司开源了他们的SDK，让用不起神策服务端的中小微企业也可以使用大数据带来的便利。

ghost_sa（鬼策）的结构设计主要考虑方便技术资源不足的中小微企业使用，部署测试快速清凉，并支持复杂数据字段上报（神策原版不支持），所以在长时间段，多字段扫描的场景，性能不如神策原版。需要完整的神策，请购买神策官方授权，他们的程序很给力。https://www.sensorsdata.cn/


介绍：

ghost_sa(鬼策)可以理解为不带前端界面的神策服务端。
主要用途是接收 神策SDK 上报的数据，和实现神策上的短链创建与解析功能。

使用了flask框架，可以通过uwsgi部署。数据库建议使用TiDB，实测1天100万事件量，单次查询当天事件在10毫秒左右，查询1个月范围的数据，返回在30-60秒左右。
如果只是体验和测试功能，也可以用MySQL，不过性能很差。

目前经过测试，支持IOS，JS，小程序，Python的SDK上报。
SDK可以在神策的项目中下载 https://github.com/sensorsdata
SDK的使用方法，可以直接查看神策官方文档 https://www.sensorsdata.cn/manual/

框架说明：

/flash_main.py <--主程序，执行后即可开始接收数据
/configs <--配置，包括查询密码，数据库密码，第三方依赖的密码都在这里配置
/component <--主要组件，运行程序所需要的主要组件都在这里
/geoio <--IP和ASN识别组件，下载的mmdb需要放在这里
/image <--需要返回的1像素图片所在处。当然，不嫌流量贵，也可以换成其他图片哈
/tools <--迁移工具，包括实时同步神策的数据和迁移历史数据进入鬼策
/logs <--日志，目前只会记录错误日志，按天分
/data_export <--迁移用数据，存放神策历史数据，用于导入鬼策。导入完后，可删除

安装初始化：
